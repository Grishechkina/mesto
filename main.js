(()=>{"use strict";var e={};function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.p="";var r=function(){function e(t,r){var n=t.card,o=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.card=n,this.cardSelector=r,this.handleCardClick=o}var r,n;return r=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this.cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".card__photo").addEventListener("click",(function(){return e.handleCardClick(e.card)}));var t=this._element.querySelector(".card__like-btn");t.addEventListener("click",(function(){return t.classList.toggle("card__like-btn_active")})),this._element.querySelector(".card__delete-btn").addEventListener("click",(function(){return e._element.remove()}))}},{key:"createCard",value:function(){this._element=this._getTemplate(),this._setEventListeners();var e=this._element.querySelector(".card__photo"),t=this._element.querySelector(".card__title");return e.src=this.card.link,e.alt=this.card.place,t.textContent=this.card.place,this._element}}])&&t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formSelector=t.formSelector,this.inputSelector=t.inputSelector,this.submitButtonSelector=t.submitButtonSelector,this.disabledButtonClass=t.disabledButtonClass,this.inputErrorClass=t.inputErrorClass,this.errorClass=t.errorClass,this.form=r}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t){e.classList.add(this.inputErrorClass);var r=this.form.querySelector(".".concat(e.id,"-input-error"));r.textContent=t,r.classList.add(this.errorClass)}},{key:"_hideInputError",value:function(e){e.classList.remove(this.inputErrorClass);var t=this.form.querySelector(".".concat(e.id,"-input-error"));t.textContent="",t.classList.remove(this.errorClass)}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_setEventListener",value:function(){var e=this;this.inputList=Array.from(this.form.querySelectorAll(this.inputSelector)),this.saveButton=this.form.querySelector(this.submitButtonSelector),this._toggleButtonState(),this.inputList.forEach((function(t){return t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState()}))}))}},{key:"_hasInvalidInput",value:function(){return this.inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this.saveButton.classList.add(this.disabledButtonClass),this.saveButton.setAttribute("disabled","")):(this.saveButton.classList.remove(this.disabledButtonClass),this.saveButton.removeAttribute("disabled"))}},{key:"enabledValidation",value:function(){this.form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListener()}},{key:"clearForm",value:function(){var e=this;this.inputList.forEach((function(t){t.value="",e._hideInputError(t)})),this.form.classList.remove(this.inputErrorClass),this.saveButton.setAttribute("disabled",""),this.saveButton.classList.add(this.disabledButtonClass)}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=n,this._renderer=o,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"renderAll",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popup=document.querySelector(t),this.closingBtn=this.popup.querySelector(".pop-up__close-btn"),this._closeByEsc=this._closeByEsc.bind(this),this._closeByOverlay=this._closeByOverlay.bind(this),this.closePopUp=this.closePopUp.bind(this)}var t,r;return t=e,(r=[{key:"setEventListeners",value:function(){document.addEventListener("keydown",this._closeByEsc),this.popup.addEventListener("click",this._closeByOverlay),this.closingBtn.addEventListener("click",this.closePopUp)}},{key:"openPopUp",value:function(){this.popup.classList.add("pop-up_opened"),this.setEventListeners()}},{key:"closePopUp",value:function(){this.popup.classList.remove("pop-up_opened"),document.removeEventListener("keydown",this._closeByEsc),this.popup.removeEventListener("click",this._closeByOverlay),this.closingBtn.removeEventListener("click",this.closePopUp)}},{key:"_closeByEsc",value:function(e){"Escape"===e.key&&this.closePopUp()}},{key:"_closeByOverlay",value:function(e){e.target.classList.contains("pop-up_opened")&&this.closePopUp()}}])&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=f(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},p.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(o){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).imgPopUpPhoto=t.popup.querySelector(".img-pop-up__photo"),t.imgPopUpTitle=t.popup.querySelector(".img-pop-up__title"),t}return t=c,(r=[{key:"openPopUp",value:function(e){this.imgPopUpPhoto.src=e.link,this.imgPopUpPhoto.alt=e.place,this.imgPopUpTitle.textContent=e.place,p(h(c.prototype),"openPopUp",this).call(this)}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(u),m=[{place:"Геленджик",link:e.p+"c5ffdfa3dc82651d8af8.jpg"},{place:"Кабардинка",link:e.p+"ad0d037c6c56646d3c12.jpg"},{place:"Мурманск",link:e.p+"b7e5eb0bbb0cfab6d490.jpg"},{place:"Мытищи",link:e.p+"90785170fed5f2ce08dc.jpg"},{place:"Нижний Новгород",link:e.p+"cb7ba0ac6fb639134237.jpg"},{place:"Севастополь",link:e.p+"83e8c49a7c908327fbfd.jpg"}],b=(document.querySelectorAll(".pop-up__close-btn"),document.querySelector(".profile")),_=(b.querySelector(".profile__name"),b.querySelector(".profile__activity"),b.querySelector(".profile__edit-btn")),S=(document.querySelector(".edit-pop-up"),document.querySelector(".pop-up__edit-form")),g=S.name,w=S.activity,k=b.querySelector(".profile__add-btn"),E=(document.querySelector(".add-card-pop-up"),document.querySelector(".pop-up__add-card-form")),P=(document.querySelector(".cards__list"),[]);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=j(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},C.apply(this,arguments)}function j(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function B(e,t){return B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},B(e,t)}function q(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(n);if(o){var r=I(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return q(this,e)});function c(e,t){var r,n=e.handleSubmitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=i.call(this,t))._handleSubmitForm=n,r.form=r.popup.querySelector(".form"),r._submitForm=r._submitForm.bind(U(r)),r._inputList=r.form.querySelectorAll(".form__input"),r._formValues={},r}return t=c,(r=[{key:"_getInputValues",value:function(){var e=this;return this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"_submitForm",value:function(e){e.preventDefault(),this._handleSubmitForm(this._getInputValues())}},{key:"setEventListeners",value:function(){C(I(c.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",this._submitForm)}},{key:"closePopUp",value:function(){this.form.removeEventListener("submit",this._submitForm),C(I(c.prototype),"closePopUp",this).call(this),this.form.reset()}}])&&L(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(u);function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var A,F,x,V=function(){function e(t){var r=t.nameSelector,n=t.activitySelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.profileName=document.querySelector(r),this.profileActivity=document.querySelector(n)}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return{profileName:this.profileName.textContent,profileActivity:this.profileActivity.textContent}}},{key:"setUserInfo",value:function(e){this.profileName.textContent=e.name,this.profileActivity.textContent=e.activity}}])&&T(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),D=new v(".img-pop-up"),N=new V({nameSelector:".profile__name",activitySelector:".profile__activity"}),M=new R({handleSubmitForm:function(e){var t=J(e);H.addItem(t),M.closePopUp()}},".add-card-pop-up"),z=new R({handleSubmitForm:function(e){N.setUserInfo(e),z.closePopUp()}},".edit-pop-up"),G=function(e){D.openPopUp(e)},H=new c({items:m,renderer:function(e){var t=J(e);H.addItem(t)}},".cards__list");function J(e){return new r({card:e,handleCardClick:G},"#card-template").createCard()}_.addEventListener("click",(function(){P.find((function(e){return e.form.classList.contains("pop-up__edit-form")})).clearForm();var e=N.getUserInfo();g.value=e.profileName,w.value=e.profileActivity,z.openPopUp()})),k.addEventListener("click",(function(){P.find((function(e){return e.form.classList.contains("pop-up__add-card-form")})).clearForm(),M.openPopUp()})),F=new o(A={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__save-btn",disabledButtonClass:"form__save-btn_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error"},S),x=new o(A,E),P.push(F,x),F.enabledValidation(),x.enabledValidation(),H.renderAll()})();